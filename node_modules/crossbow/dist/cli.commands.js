"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var _ = require("../lodash.custom");
var common = "../opts/common.json";
var runcommon = "../opts/run-common.json";
var globalcommon = "../opts/global-common.json";
exports.commands = {
    run: {
        alias: ["run", "r"],
        description: "Run a task(s)",
        opts: [
            "../opts/command.run.opts.json",
            runcommon,
            globalcommon,
            common,
        ],
        help: "Usage: crossbow run [...tasks] [OPTIONS]\n\n{bold:Run Options:}\n\n" + optionsList(_.merge({}, require("../opts/command.run.opts.json"), require(runcommon))) + "\n\n{bold:Global Options:}\n\n" + optionsList(_.merge({}, require(globalcommon), require(common))) + "\n\n{bold:Example: run 2 named tasks in parallel} \n\n    $ crossbow run task1 task2 -p\n\n{bold:Example: use a config file from another folder} \n\n    $ crossbow run <task-name> -c .conf/crossbow.yaml\n    "
    },
    watch: {
        alias: ["watch", "w"],
        description: "Run a watcher(s)",
        opts: [
            "../opts/command.watch.opts.json",
            globalcommon,
            runcommon,
            common
        ],
        help: "Usage: crossbow watch [...watcher] [OPTIONS]\n\n{bold:Watch Options:}\n\n" + twoColFromJson(_.merge({}, require("../opts/command.watch.opts.json"), require("../opts/run-common.json")), "desc") + "\n\n{bold:Global Options:}\n\n" + twoColFromJson(_.merge({}, require(globalcommon), require(common)), "desc") + "\n\n{bold:Example: run a watcher called 'dev'} \n\n    $ crossbow watch dev\n\n{bold:Example: run a shorthand watcher } \n\n    $ crossbow watch '*.json -> my-task' --debounce 500 --block\n    "
    },
    tasks: {
        alias: ["tasks", "t", "ls"],
        description: "See your available top-level tasks",
        opts: [
            "../opts/command.tasks.opts.json",
            common,
            globalcommon
        ],
        help: "Usage: crossbow tasks [OPTIONS]\n\n{bold:Options:}\n\n" + twoColFromJson(_.merge({}, require(globalcommon), require(common)), "desc") + "\n\n{bold:Example: show all available tasks} \n\n    $ crossbow tasks\n\n{bold:Example: show all tasks different config file} \n\n    $ crossbow tasks -c conf/config.js\n    "
    },
    watchers: {
        alias: ["watchers"],
        description: "See your available watchers",
        opts: [
            "../opts/command.watchers.opts.json",
            globalcommon
        ],
        help: "Usage: crossbow watchers [OPTIONS]\n        \n{bold:Options:} \n\n" + twoColFromJson(_.merge({}, require(globalcommon)), "desc") + "\n\n{bold:Example: Show watchers from a config file}\n\n    $ crossbow watchers -c conf/config.js\n"
    },
    init: {
        alias: ["init", "i"],
        description: "Create a configuration file",
        opts: [
            "../opts/command.init.opts.json",
            globalcommon
        ],
        help: "Usage: crossbow init [OPTIONS]\n\n{bold:Init Options:}\n\n" + twoColFromJson(_.merge({}, require("../opts/command.init.opts.json")), "desc") + "\n\n{bold:Options:}\n\n" + twoColFromJson(_.merge({}, require(globalcommon)), "desc") + "\n\n{bold:Examples: Create a config file in default format (yaml)}\n\n    $ crossbow init\n\n{bold:Examples: Create a config file in JSON format}\n\n    $ crossbow init --type json\n"
    },
    docs: {
        alias: ["docs"],
        description: "Generate documentation automatically",
        opts: [
            "../opts/command.docs.opts.json",
            globalcommon
        ],
        help: "Usage: crossbow docs [OPTIONS]\n\n{bold:Docs Options:}\n\n" + twoColFromJson(_.merge({}, require("../opts/command.docs.opts.json")), "desc") + "\n\n{bold:Options:}\n\n" + twoColFromJson(_.merge({}, require(globalcommon)), "desc") + "\n\n{bold:Example: Generate documentation in the current directory}\n\n    $ crossbow docs\n\n{bold:Example: Create a NEW file containing documentation}\n\n    $ crossbow docs --output docs.md\n    \n{bold:Example: Override documentation in an existing file}\n\n    $ crossbow docs --file existing-docs.md\n"
    }
};
function optionsList(obj) {
    return twoColFromJson(obj, "desc", function (key, subject) {
        var open = "--" + key;
        if (subject.alias && subject.alias.length) {
            return [open, ", "].concat(subject.alias.map(function (x) { return "-" + x; }).join(", ")).join("");
        }
        return open;
    });
}
function twoColFromJson(json, rightSidePropertyName, leftside) {
    if (!leftside)
        leftside = function (subject) { return subject; };
    var cols = Object.keys(json).map(function (key) {
        var subject = json[key];
        return [leftside(key, subject), json[key][rightSidePropertyName]];
    });
    var longest = cols.reduce(function (acc, item) {
        if (item[0].length > acc)
            return item[0].length;
        return acc;
    }, 0);
    var padded = cols.map(function (tuple) {
        if (tuple[0].length < longest) {
            return [tuple[0] + new Array(longest - tuple[0].length).join(" ") + " ", tuple[1]];
        }
        return tuple;
    });
    return padded.reduce(function (acc, item) {
        return acc.concat("    " + item.join("  "));
    }, []).join("\n");
}
exports.twoColFromJson = twoColFromJson;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xpLmNvbW1hbmRzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2NsaS5jb21tYW5kcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0FBWXRDLElBQU0sTUFBTSxHQUFTLHFCQUFxQixDQUFDO0FBQzNDLElBQU0sU0FBUyxHQUFNLHlCQUF5QixDQUFDO0FBQy9DLElBQU0sWUFBWSxHQUFHLDRCQUE0QixDQUFDO0FBRXJDLFFBQUEsUUFBUSxHQUFnQjtJQUVqQyxHQUFHLEVBQUU7UUFDRCxLQUFLLEVBQUUsQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDO1FBQ25CLFdBQVcsRUFBRSxlQUFlO1FBQzVCLElBQUksRUFBRTtZQUNGLCtCQUErQjtZQUMvQixTQUFTO1lBQ1QsWUFBWTtZQUNaLE1BQU07U0FDVDtRQUNELElBQUksRUFBRSx3RUFJWixXQUFXLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLCtCQUErQixDQUFDLEVBQUUsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsc0NBSXRGLFdBQVcsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxPQUFPLENBQUMsWUFBWSxDQUFDLEVBQUUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMscU5BUzdEO0tBQ0E7SUFFRCxLQUFLLEVBQUU7UUFDSCxLQUFLLEVBQUUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDO1FBQ3JCLFdBQVcsRUFBRSxrQkFBa0I7UUFDL0IsSUFBSSxFQUFFO1lBQ0YsaUNBQWlDO1lBQ2pDLFlBQVk7WUFDWixTQUFTO1lBQ1QsTUFBTTtTQUNUO1FBQ0QsSUFBSSxFQUFFLDhFQUlaLGNBQWMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxPQUFPLENBQUMsaUNBQWlDLENBQUMsRUFBRSxPQUFPLENBQUMseUJB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