"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var RxNode = require("rx-node");
var Rx = require("rx");
var types = {
    observable: {
        predicate: function (input) {
            return Rx.Observable.isObservable(input);
        },
        handle: handleObs
    },
    promise: {
        predicate: function (input) {
            return typeof input.then === "function";
        },
        handle: handlePromise
    },
    nodeStream: {
        predicate: function (input) {
            return typeof input.on === "function";
        },
        handle: handleNodeStream
    }
};
function handleReturnType(output, cb) {
    var match = Object.keys(types).filter(function (x) {
        return types[x].predicate.call(null, output);
    })[0];
    if (match && typeof types[match].handle === "function") {
        return types[match].handle.apply(null, [output, cb]);
    }
}
exports.default = handleReturnType;
;
function handleNodeStream(output, done) {
    return RxNode.fromStream(output, "end")
        .subscribe(function (val) {
    }, function (err) {
        done(err);
    }, function () {
        done();
    });
}
function handlePromise(output, done) {
    return Rx.Observable
        .fromPromise(output)
        .subscribe(function (val) {
    }, function (err) {
        done(err);
    }, function () {
        done();
    });
}
function handleObs(output, done) {
    return output
        .subscribe(function (val) {
    }, function (e) {
        done(e);
    }, function () {
        done();
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFzay5yZXR1cm4udmFsdWVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3Rhc2sucmV0dXJuLnZhbHVlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNoQyxJQUFJLEVBQUUsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFFdkIsSUFBTSxLQUFLLEdBQUc7SUFDVixVQUFVLEVBQUU7UUFDUixTQUFTLFlBQUUsS0FBSztZQUNaLE9BQU8sRUFBRSxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDN0MsQ0FBQztRQUNELE1BQU0sRUFBRSxTQUFTO0tBQ3BCO0lBQ0QsT0FBTyxFQUFFO1FBQ0wsU0FBUyxZQUFFLEtBQUs7WUFDWixPQUFPLE9BQU8sS0FBSyxDQUFDLElBQUksS0FBSyxVQUFVLENBQUM7UUFDNUMsQ0FBQztRQUNELE1BQU0sRUFBRSxhQUFhO0tBQ3hCO0lBQ0QsVUFBVSxFQUFFO1FBQ1IsU0FBUyxZQUFFLEtBQUs7WUFDWixPQUFPLE9BQU8sS0FBSyxDQUFDLEVBQUUsS0FBSyxVQUFVLENBQUM7UUFDMUMsQ0FBQztRQUNELE1BQU0sRUFBRSxnQkFBZ0I7S0FDM0I7Q0FDSixDQUFDO0FBUUYsU0FBd0IsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLEVBQWM7SUFFM0QsSUFBSSxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBQSxDQUFDO1FBQ25DLE9BQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ2pELENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRU4sSUFBSSxLQUFLLElBQUksT0FBTyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxLQUFLLFVBQVUsRUFBRTtRQUNwRCxPQUFPLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0tBQ3hEO0FBQ0wsQ0FBQztBQVRELG1DQVNDO0FBQUEsQ0FBQztBQUVGLFNBQVMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLElBQUk7SUFDbEMsT0FBTyxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUM7U0FDbEMsU0FBUyxDQUFDLFVBQVUsR0FBRztJQUN4QixDQUFDLEVBQUUsVUFBVSxHQUFHO1FBQ1osSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2QsQ0FBQyxFQUFFO1FBQ0MsSUFBSSxFQUFFLENBQUM7SUFDWCxDQUFDLENBQUMsQ0FBQztBQUNYLENBQUM7QUFFRCxTQUFTLGFBQWEsQ0FBQyxNQUFNLEVBQUUsSUFBSTtJQUMvQixPQUFPLEVBQUUsQ0FBQyxVQUFVO1NBQ2YsV0FBVyxDQUFDLE1BQU0sQ0FBQztTQUNuQixTQUFTLENBQUMsVUFBQyxHQUFHO0lBQ2YsQ0FBQyxFQUFFLFVBQUEsR0FBRztRQUNGLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNkLENBQUMsRUFBRTtRQUNDLElBQUksRUFBRSxDQUFDO0lBQ1gsQ0FBQyxDQUFDLENBQUM7QUFDWCxDQUFDO0FBRUQsU0FBUyxTQUFTLENBQUMsTUFBTSxFQUFFLElBQUk7SUFDM0IsT0FBTyxNQUFNO1NBQ1IsU0FBUyxDQUFDLFVBQUEsR0FBRztJQUNkLENBQUMsRUFBRSxVQUFBLENBQUM7UUFDQSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDWixDQUFDLEVBQUU7UUFDQyxJQUFJLEVBQUUsQ0FBQztJQUNYLENBQUMsQ0FBQyxDQUFDO0FBQ1gsQ0FBQyJ9